# SKBLAB.Branch.Checker
Тестовое задание №1 от SKBLAB

## Формулировка задачи

```
Реализовать для каждой не влитой в `master` ветки в репозитории, кроме некоторых
заданных в словаре (`master`,`develop` и тп):
- Проверку на правила именования веток: имя ветки тестируется регекспом, если не
удовлетворяет условию -- отсылается письмо из шаблона "переименуй!" последнему
контрибутору ветки, ветка исключается из дальнейших проверок.
Пример теста: `^(feature|bugfix)/task-\d+` -- ветки разносятся по типу задачи и указывают на
номер задачи.
- Проверку на заброшенность: если со времени последнего коммита в ветке прошло более 2х
недель -- отсылается
письмо из шаблона "обнови или удали!" последнему контрибутору ветки, ветка исключается
из дальнейших проверок.
```

## Выбор пути решения

Для решения задачи будет создан сервис на Python, выполняющий все необходимые функции: получение данных из репозитория, их обработка и отправка уведомлений. Параметры работы сервиса (такие как адрес репозитория, учётные данные, ветки-исключения) будут задаваться в файлах-справочниках.

Изначально я рассматривал два варианта логики работы сервиса: использование штатного клиента git для Linux и работа через API git-сервера. Первый вариант имеет как сильные стороны:
- универсален, так как клиент git работает с любыми git-серверами
- легко получить список веток и ID их коммитов из удаленного репозитория: `git ls-remote <URL>`

так и слабые:
- чтобы получить метаданные коммита потребуется "вытягивать" его и даже при `git fetch --depth 1` может уйти много времени на загрузку
- требует множества отдельных действий: инициация локального репозитория, подключение remote, линковка локальной и удаленной веток, загрузка коммита, получение метаданных и т.д.


Работа через API не универсальна, но обычно на проектах используется один git-сервер и этот минус становится не ощутим. Зато в качестве плюсов получим:
- отсутствие необходимости выкачивания даже части репозитория
- относительно простую логику запросов

Так как в ходе тестовых заданий потребуется инсталлировать GitLab, я решил рассмотреть вариант работы именно с ним. Для взаимодействия с API потребуется дополнительный модуль, который нужно установить перед запуском сервиса:

```
pip3 install python-gitlab
```
